<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Evolvere Invest - Configura√ß√µes Admin</title>
    <link rel="stylesheet" href="../css/styles.css" />
    <link rel="stylesheet" href="../css/configAdmin.css" />
    <link rel="icon" href="../assets/icon/favicon.png" />
    <script src="../js/monitoramento.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@400;700&family=Orbitron:wght@400;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <header class="site-header">
      <div class="container header-inner">
        <div class="logo">
          <a href="index.html">
            <img src="./imgs/Logo-projeto.png" alt="Evolvere Logo" />
          </a>
          <div class="brand-txt">
            <h1>Evolvere Invest</h1>
            <small>Painel Administrativo</small>
          </div>
        </div>

        <nav>
          <ul class="nav-list">
            <li><a href="dashboardAdmin.html">üìä Dashboard</a></li>
            <li>
              <a href="configAdmin.html" class="active">‚öôÔ∏è Configura√ß√µes</a>
            </li>
            <li class="divider">|</li>
            <li><a onclick="logout()" class="btn-link">Sair</a></li>
          </ul>
        </nav>
      </div>
    </header>

    <main class="container main-content">
      <section class="overview-cards">
        <article class="overview-card card-users">
          <div class="overview-icon">üë•</div>
          <div class="overview-content">
            <h3>Usu√°rios Ativos</h3>
            <div class="overview-value">127</div>
            <span class="overview-trend positive">‚Üë 16.5% este m√™s</span>
          </div>
        </article>

        <article class="overview-card card-companies">
          <div class="overview-icon">üè¢</div>
          <div class="overview-content">
            <h3>Empresas Cadastradas</h3>
            <div class="overview-value">92</div>
            <span class="overview-trend positive">‚Üë 8 novas</span>
          </div>
        </article>

        <article class="overview-card card-queries">
          <div class="overview-icon">üìä</div>
          <div class="overview-content">
            <h3>Consultas Hoje</h3>
            <div class="overview-value">342</div>
            <span class="overview-trend neutral">‚Üí M√©dia: 281/dia</span>
          </div>
        </article>

        <article class="overview-card card-system">
          <div class="overview-icon">‚ö°</div>
          <div class="overview-content">
            <h3>Status do Sistema</h3>
            <div class="overview-value">99.8<span class="unit">%</span></div>
            <span class="overview-trend positive">‚úì Todos sistemas OK</span>
          </div>
        </article>
      </section>

      <section class="config-tabs">
        <div class="tabs-header">
          <button class="tab-btn active" data-tab="users">
            <span class="tab-icon">üë•</span>
            <span>Gerenciar Usu√°rios</span>
          </button>
          <button class="tab-btn" data-tab="create">
            <span class="tab-icon">‚ûï</span>
            <span>Criar Usu√°rio</span>
          </button>
          <button class="tab-btn" data-tab="profile">
            <span class="tab-icon">üë§</span>
            <span>Meu Perfil</span>
          </button>
          <button class="tab-btn" data-tab="settings">
            <span class="tab-icon">‚öôÔ∏è</span>
            <span>Configura√ß√µes</span>
          </button>
        </div>

        <div class="tab-content active" id="tab-users">
          <div class="card">
            <div class="card-header">
              <div>
                <h2>üë• Gerenciar Usu√°rios</h2>
                <p>Visualize, edite ou remova usu√°rios da plataforma</p>
              </div>
              <div class="card-actions">
                <input
                  type="search"
                  placeholder="üîç Buscar usu√°rio..."
                  class="search-input"
                />
                <select class="filter-select">
                  <option value="all">Todos</option>
                  <option value="admin">Administradores</option>
                  <option value="user">Usu√°rios Padr√£o</option>
                </select>
              </div>
            </div>

            <div class="users-table-wrapper">
              <table class="users-table">
                <thead>
                  <tr>
                    <th>Nome</th>
                    <th>Email</th>
                    <th>Tipo</th>
                    <th>Empresa</th>
                    <th>Status</th>
                    <th>Cadastro</th>
                    <th>A√ß√µes</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>
                      <div class="user-info">
                        <div class="user-avatar">RM</div>
                        <span>Rodrigo Martins</span>
                      </div>
                    </td>
                    <td>rodrigo@admin.net</td>
                    <td><span class="badge badge-admin">Admin</span></td>
                    <td>Evolvere Invest</td>
                    <td><span class="status-dot active"></span> Ativo</td>
                    <td>15/01/2024</td>
                    <td>
                      <div class="table-actions">
                        <button class="btn-icon btn-edit" title="Editar">
                          ‚úèÔ∏è
                        </button>
                        <button class="btn-icon btn-delete" title="Excluir">
                          üóëÔ∏è
                        </button>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <div class="user-info">
                        <div class="user-avatar">JS</div>
                        <span>Julia Santos</span>
                      </div>
                    </td>
                    <td>julia.santos@construtoraabc.com</td>
                    <td><span class="badge badge-user">Usu√°rio</span></td>
                    <td>Construtora ABC</td>
                    <td><span class="status-dot active"></span> Ativo</td>
                    <td>22/02/2024</td>
                    <td>
                      <div class="table-actions">
                        <button class="btn-icon btn-edit" title="Editar">
                          ‚úèÔ∏è
                        </button>
                        <button class="btn-icon btn-delete" title="Excluir">
                          üóëÔ∏è
                        </button>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <div class="user-info">
                        <div class="user-avatar">CM</div>
                        <span>Carlos Mendes</span>
                      </div>
                    </td>
                    <td>carlos@investimentos.com</td>
                    <td><span class="badge badge-user">Usu√°rio</span></td>
                    <td>Investimentos Delta</td>
                    <td><span class="status-dot active"></span> Ativo</td>
                    <td>10/03/2024</td>
                    <td>
                      <div class="table-actions">
                        <button class="btn-icon btn-edit" title="Editar">
                          ‚úèÔ∏è
                        </button>
                        <button class="btn-icon btn-delete" title="Excluir">
                          üóëÔ∏è
                        </button>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <div class="user-info">
                        <div class="user-avatar">AP</div>
                        <span>Ana Paula Silva</span>
                      </div>
                    </td>
                    <td>ana.paula@fundosigma.com</td>
                    <td><span class="badge badge-user">Usu√°rio</span></td>
                    <td>Fundo Sigma</td>
                    <td><span class="status-dot inactive"></span> Inativo</td>
                    <td>05/04/2024</td>
                    <td>
                      <div class="table-actions">
                        <button class="btn-icon btn-edit" title="Editar">
                          ‚úèÔ∏è
                        </button>
                        <button class="btn-icon btn-delete" title="Excluir">
                          üóëÔ∏è
                        </button>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>

            <div class="pagination">
              <button class="btn-pagination">‚Üê Anterior</button>
              <span class="pagination-info">P√°gina 1 de 10 ‚Ä¢ 127 usu√°rios</span>
              <button class="btn-pagination">Pr√≥ximo ‚Üí</button>
            </div>
          </div>
        </div>

        <div class="tab-content" id="tab-create">
          <div class="card">
            <div class="card-header">
              <div>
                <h2>‚ûï Criar Novo Usu√°rio</h2>
                <p>Adicione administradores ou usu√°rios padr√£o √† plataforma</p>
              </div>
            </div>

            <form class="config-form">
              <div class="form-row">
                <div class="form-group">
                  <label for="create-name">Nome Completo *</label>
                  <input
                    type="text"
                    id="create-name"
                    placeholder="Ex: Jo√£o Silva"
                    required
                  />
                </div>
                <div class="form-group">
                  <label for="create-email">Email *</label>
                  <input
                    type="email"
                    id="create-email"
                    placeholder="usuario@exemplo.com"
                    required
                  />
                </div>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="create-password">Senha *</label>
                  <input
                    type="password"
                    id="create-password"
                    placeholder="M√≠nimo 8 caracteres"
                    required
                  />
                </div>
                <div class="form-group">
                  <label for="create-confirm">Confirmar Senha *</label>
                  <input
                    type="password"
                    id="create-confirm"
                    placeholder="Repita a senha"
                    required
                  />
                </div>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="create-type">Tipo de Usu√°rio *</label>
                  <select id="create-type" required>
                    <option value="">Selecione...</option>
                    <option value="user">Usu√°rio Padr√£o</option>
                    <option value="admin">Administrador (@admin.net)</option>
                  </select>
                  <small class="form-hint"
                    >Administradores t√™m acesso total ao sistema</small
                  >
                </div>
                <div class="form-group">
                  <label for="create-company">Empresa (Opcional)</label>
                  <input
                    type="text"
                    id="create-company"
                    placeholder="Nome da empresa"
                  />
                </div>
              </div>

              <div class="form-group">
                <label for="create-cnpj">CNPJ (Opcional)</label>
                <input
                  type="text"
                  id="create-cnpj"
                  placeholder="00.000.000/0000-00"
                />
              </div>

              <div class="alert alert-info">
                <strong>‚ÑπÔ∏è Aten√ß√£o:</strong> Usu√°rios administradores devem usar
                email com dom√≠nio <strong>@admin.net</strong>. Usu√°rios padr√£o
                podem usar qualquer dom√≠nio.
              </div>

              <div class="form-actions">
                <button type="button" class="btn-secondary">Cancelar</button>
                <button type="submit" class="btn-primary">
                  ‚úì Criar Usu√°rio
                </button>
              </div>
            </form>
          </div>
        </div>

        <!-- TAB 3: MEU PERFIL -->
        <div class="tab-content" id="tab-profile">
          <div class="card">
            <div class="card-header">
              <div>
                <h2>üë§ Meu Perfil</h2>
                <p>Gerencie suas informa√ß√µes pessoais</p>
              </div>
            </div>

            <form class="config-form">
              <div class="profile-header">
                <div class="profile-avatar-large">RM</div>
                <div class="profile-info">
                  <h3>Rodrigo Martins</h3>
                  <p>rodrigo@admin.net</p>
                  <span class="badge badge-admin">Administrador Master</span>
                </div>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="profile-name">Nome Completo</label>
                  <input
                    type="text"
                    id="profile-name"
                    value="Rodrigo Martins"
                  />
                </div>
                <div class="form-group">
                  <label for="profile-email">Email</label>
                  <input
                    type="email"
                    id="profile-email"
                    value="rodrigo@admin.net"
                    disabled
                  />
                  <small class="form-hint">Email n√£o pode ser alterado</small>
                </div>
              </div>

              <div class="form-divider">
                <span>Alterar Senha</span>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="profile-current-password">Senha Atual</label>
                  <input
                    type="password"
                    id="profile-current-password"
                    placeholder="Digite sua senha atual"
                  />
                </div>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="profile-new-password">Nova Senha</label>
                  <input
                    type="password"
                    id="profile-new-password"
                    placeholder="M√≠nimo 8 caracteres"
                  />
                </div>
                <div class="form-group">
                  <label for="profile-confirm-password"
                    >Confirmar Nova Senha</label
                  >
                  <input
                    type="password"
                    id="profile-confirm-password"
                    placeholder="Repita a nova senha"
                  />
                </div>
              </div>

              <div class="form-actions">
                <button type="button" class="btn-secondary">Cancelar</button>
                <button type="submit" class="btn-primary">
                  üì• Salvar Altera√ß√µes
                </button>
              </div>
            </form>
          </div>
        </div>
        <div class="tab-content" id="tab-settings">
          <div class="card">
            <div class="card-header">
              <div>
                <h2>‚öôÔ∏è Configura√ß√µes do Sistema</h2>
                <p>Ajustes gerais da plataforma</p>
              </div>
            </div>

            <form class="config-form">
              <h3 class="section-title">üîî Notifica√ß√µes</h3>

              <div class="toggle-group">
                <div class="toggle-item">
                  <div class="toggle-info">
                    <strong>Notificar novos cadastros</strong>
                    <p>Receba email quando um novo usu√°rio se cadastrar</p>
                  </div>
                  <label class="toggle-switch">
                    <input type="checkbox" checked />
                    <span class="toggle-slider"></span>
                  </label>
                </div>

                <div class="toggle-item">
                  <div class="toggle-info">
                    <strong>Alertas de erro de API</strong>
                    <p>Notifica√ß√£o quando APIs externas falharem</p>
                  </div>
                  <label class="toggle-switch">
                    <input type="checkbox" checked />
                    <span class="toggle-slider"></span>
                  </label>
                </div>

                <div class="toggle-item">
                  <div class="toggle-info">
                    <strong>Relat√≥rio semanal</strong>
                    <p>Resumo de atividades enviado toda segunda-feira</p>
                  </div>
                  <label class="toggle-switch">
                    <input type="checkbox" />
                    <span class="toggle-slider"></span>
                  </label>
                </div>
              </div>

              <h3 class="section-title">üóÑÔ∏è Dados e Sincroniza√ß√£o</h3>

              <div class="sync-info">
                <div class="sync-item">
                  <span class="sync-label">√öltima sincroniza√ß√£o:</span>
                  <span class="sync-value">Hoje, 14:32</span>
                </div>
                <div class="sync-item">
                  <span class="sync-label">Pr√≥xima sincroniza√ß√£o:</span>
                  <span class="sync-value">Hoje, 18:00</span>
                </div>
                <div class="sync-item">
                  <span class="sync-label">Frequ√™ncia:</span>
                  <span class="sync-value">A cada 4 horas</span>
                </div>
              </div>

              <button type="button" class="btn-sync">
                <span>üîÑ</span>
                <span>For√ßar Sincroniza√ß√£o Agora</span>
              </button>

              <h3 class="section-title">üîí Seguran√ßa</h3>

              <div class="toggle-group">
                <div class="toggle-item">
                  <div class="toggle-info">
                    <strong>Autentica√ß√£o de dois fatores (2FA)</strong>
                    <p>Camada extra de seguran√ßa no login</p>
                  </div>
                  <label class="toggle-switch">
                    <input type="checkbox" />
                    <span class="toggle-slider"></span>
                  </label>
                </div>

                <div class="toggle-item">
                  <div class="toggle-info">
                    <strong>Exigir senha forte</strong>
                    <p>M√≠nimo de 12 caracteres com s√≠mbolos</p>
                  </div>
                  <label class="toggle-switch">
                    <input type="checkbox" checked />
                    <span class="toggle-slider"></span>
                  </label>
                </div>
              </div>

              <div class="form-actions">
                <button type="button" class="btn-secondary">
                  Restaurar Padr√µes
                </button>
                <button type="submit" class="btn-primary">
                  üíæ Salvar Configura√ß√µes
                </button>
              </div>
            </form>
          </div>
        </div>
      </section>
    </main>

    <footer class="site-footer">
      <div class="container footer-inner">
        <p>&copy; 2025 Evolvere Invest ‚Äî Painel Administrativo</p>
        <p>Contato: admin@evolvereinvest.net</p>
      </div>
    </footer>

    <script src="./js/configAdmin.js"></script>
  </body>
</html>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const tabButtons = document.querySelectorAll(".tab-btn");
    const tabContents = document.querySelectorAll(".tab-content");

    tabButtons.forEach((button) => {
      button.addEventListener("click", () => {
        const targetTab = button.getAttribute("data-tab");


        tabButtons.forEach((btn) => btn.classList.remove("active"));
        tabContents.forEach((content) => content.classList.remove("active"));

        button.classList.add("active");
        document.getElementById(`tab-${targetTab}`).classList.add("active");
      });
    });

  
    const createUserForm = document.querySelector("#tab-create form");
    if (createUserForm) {
      createUserForm.addEventListener("submit", function (e) {
        e.preventDefault();

        const name = document.getElementById("create-name").value;
        const email = document.getElementById("create-email").value;
        const password = document.getElementById("create-password").value;
        const confirm = document.getElementById("create-confirm").value;
        const type = document.getElementById("create-type").value;

        if (!name || !email || !password || !type) {
          alert("‚ö†Ô∏è Por favor, preencha todos os campos obrigat√≥rios!");
          return;
        }

        if (password.length < 8) {
          alert("‚ö†Ô∏è A senha deve ter no m√≠nimo 8 caracteres!");
          return;
        }

        if (password !== confirm) {
          alert("‚ö†Ô∏è As senhas n√£o coincidem!");
          return;
        }

        if (type === "admin" && !email.endsWith("@admin.net")) {
          alert("‚ö†Ô∏è Administradores devem usar email com dom√≠nio @admin.net!");
          return;
        }

        alert(`‚úÖ Usu√°rio ${name} criado com sucesso!`);
        createUserForm.reset();
      });
    }

    const profileForm = document.querySelector("#tab-profile form");
    if (profileForm) {
      profileForm.addEventListener("submit", function (e) {
        e.preventDefault();

        const currentPassword = document.getElementById(
          "profile-current-password"
        ).value;
        const newPassword = document.getElementById(
          "profile-new-password"
        ).value;
        const confirmPassword = document.getElementById(
          "profile-confirm-password"
        ).value;

        if (currentPassword || newPassword || confirmPassword) {
          if (!currentPassword) {
            alert("‚ö†Ô∏è Digite sua senha atual!");
            return;
          }

          if (newPassword.length < 8) {
            alert("‚ö†Ô∏è A nova senha deve ter no m√≠nimo 8 caracteres!");
            return;
          }

          if (newPassword !== confirmPassword) {
            alert("‚ö†Ô∏è As senhas n√£o coincidem!");
            return;
          }
        }

        alert("‚úÖ Perfil atualizado com sucesso!");
      });
    }

    const settingsForm = document.querySelector("#tab-settings form");
    if (settingsForm) {
      settingsForm.addEventListener("submit", function (e) {
        e.preventDefault();
        alert("‚úÖ Configura√ß√µes salvas com sucesso!");
      });
    }

    const searchInput = document.querySelector(".search-input");
    const filterSelect = document.querySelector(".filter-select");
    const tableRows = document.querySelectorAll(".users-table tbody tr");

    function filterTable() {
      const searchTerm = searchInput ? searchInput.value.toLowerCase() : "";
      const filterType = filterSelect ? filterSelect.value : "all";

      tableRows.forEach((row) => {
        const name =
          row.querySelector(".user-info span")?.textContent.toLowerCase() || "";
        const email =
          row.querySelectorAll("td")[1]?.textContent.toLowerCase() || "";
        const type =
          row.querySelector(".badge")?.textContent.toLowerCase() || "";

        const matchesSearch =
          name.includes(searchTerm) || email.includes(searchTerm);
        const matchesFilter =
          filterType === "all" ||
          (filterType === "admin" && type.includes("admin")) ||
          (filterType === "user" && type.includes("usu√°rio"));

        row.style.display = matchesSearch && matchesFilter ? "" : "none";
      });
    }

    if (searchInput) {
      searchInput.addEventListener("input", filterTable);
    }

    if (filterSelect) {
      filterSelect.addEventListener("change", filterTable);
    }

    const deleteButtons = document.querySelectorAll(".btn-delete");
    deleteButtons.forEach((button) => {
      button.addEventListener("click", function () {
        const row = this.closest("tr");
        const userName = row.querySelector(".user-info span").textContent;

        if (
          confirm(
            `‚ö†Ô∏è Tem certeza que deseja excluir o usu√°rio "${userName}"?\n\nEsta a√ß√£o n√£o pode ser desfeita!`
          )
        ) {
          row.remove();
          alert("‚úÖ Usu√°rio exclu√≠do com sucesso!");
        }
      });
    });

    const editButtons = document.querySelectorAll(".btn-edit");
    editButtons.forEach((button) => {
      button.addEventListener("click", function () {
        alert("‚ÑπÔ∏è Funcionalidade de edi√ß√£o em desenvolvimento...");
      });
    });

    const syncButton = document.querySelector(".btn-sync");
    if (syncButton) {
      syncButton.addEventListener("click", function () {
        this.disabled = true;
        this.innerHTML = "<span>üîÑ</span><span>Sincronizando...</span>";

        setTimeout(() => {
          this.disabled = false;
          this.innerHTML =
            "<span>üîÑ</span><span>For√ßar Sincroniza√ß√£o Agora</span>";
          alert("‚úÖ Sincroniza√ß√£o conclu√≠da com sucesso!");
        }, 2000);
      });
    }

    const typeSelect = document.getElementById("create-type");
    const emailInput = document.getElementById("create-email");

    if (typeSelect && emailInput) {
      typeSelect.addEventListener("change", function () {
        if (this.value === "admin") {
          const currentEmail = emailInput.value;
          if (currentEmail && !currentEmail.includes("@")) {
            emailInput.value = currentEmail + "@admin.net";
          } else if (!currentEmail) {
            emailInput.placeholder = "usuario@admin.net";
          }
        } else {
          emailInput.placeholder = "usuario@exemplo.com";
        }
      });
    }

    const cancelButtons = document.querySelectorAll(".btn-secondary");
    cancelButtons.forEach((button) => {
      if (button.textContent.includes("Cancelar")) {
        button.addEventListener("click", function () {
          const form = this.closest("form");
          if (form) {
            if (
              confirm(
                "‚ö†Ô∏è Tem certeza que deseja cancelar? Todas as altera√ß√µes ser√£o perdidas."
              )
            ) {
              form.reset();
            }
          }
        });
      }
    });
  });

  function logout() {
    if (confirm("‚ö†Ô∏è Tem certeza que deseja sair?")) {
      sessionStorage.clear();
      window.location.href = "./login.html";
    }
  }
</script>
