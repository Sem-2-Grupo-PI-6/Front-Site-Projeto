<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Evolvere Invest - Portal Empresarial</title>
  <link rel="stylesheet" href="../css/styles.css" />
  <link rel="stylesheet" href="../css/login.css" />
  <link rel="icon" href="../assets/icon/favicon.png" />
</head>
<body class="portal-empresa">
  <header class="site-header">
    <div class="container header-inner">
      <div class="logo">
        <a href="../index.html">
          <img src="../imgs/Logo-projeto.png" alt="Evolvere Logo" />
        </a>
        <div class="brand-txt">
          <h1>Evolvere Invest</h1>
          <small>Portal Empresarial</small>
        </div>
      </div>
    </div>
  </header>

  <main class="container">
    <div class="auth-wrapper">
      <div class="auth-card">
        <div class="form-col">
          <h2>Acesso Empresarial</h2>
          <p>Gerencie usu√°rios, configure permiss√µes e acesse dashboards corporativos</p>

          <form onsubmit="return entrar()">
            <div class="form-group">
              <label for="email">E-mail Corporativo</label>
              <input
                id="input_email"
                type="email"
                placeholder="gestor@suaempresa.com"
                required
                autofocus
              />
            </div>

            <div class="form-group">
              <label for="senha">Senha</label>
              <input
                id="input_senha"
                type="password"
                placeholder="Digite sua senha"
                required
              />
            </div>

            <button type="submit" class="btn-primary" id="btnLogin">
              Acessar Painel
            </button>
          </form>
        </div>

        <aside class="meta-col">
          <div class="meta-box">
            <h3>üíº Painel de Gest√£o</h3>
            <p>Gerencie usu√°rios da sua empresa, configure permiss√µes e acompanhe m√©tricas de uso.</p>
          </div>
          <div class="meta-box">
            <ul>
              <li>Cadastro e remo√ß√£o de usu√°rios</li>
              <li>Controle de acessos e licen√ßas</li>
              <li>Dashboards personalizados</li>
            </ul>
          </div>
        </aside>
      </div>
    </div>
  </main>

  <footer class="site-footer">
    <div class="container footer-inner">
      <p>&copy; 2025 Evolvere Invest ‚Äî Prot√≥tipo educativo</p>
      <p>Contato: equipe@evolvereinvest.net</p>
    </div>
  </footer>

  <script>
function entrar() {
  const email = document.getElementById('input_email').value.trim();
  const senha = document.getElementById('input_senha').value.trim();
  const btnLogin = document.getElementById('btnLogin');

  if (!email || !senha) {
    alert("‚ö†Ô∏è Por favor, preencha todos os campos!");
    return false;
  }


  btnLogin.classList.add('loading');
  btnLogin.textContent = 'Entrando...';
  btnLogin.disabled = true;

  fetch("/usuarios/autenticar", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      emailServer: email,
      senhaServer: senha,
      tipoEsperadoServer: "empresa" 
    }),
  })
  .then(response => {
    if (!response.ok) {
      return response.json().then(data => {
        throw new Error(data.erro || 'Email ou senha inv√°lidos');
      });
    }
    return response.json();
  })
  .then(usuario => {
    sessionStorage.setItem("USUARIO_LOGADO", JSON.stringify(usuario));
    btnLogin.textContent = '‚úì Sucesso!';
    
    setTimeout(() => {
      window.location.href = "../dashboardCliente.html";
    }, 800);
  })
  .catch(erro => {
    btnLogin.classList.remove('loading');
    btnLogin.textContent = 'Entrar';
    btnLogin.disabled = false;
    alert(`‚ùå ${erro.message}`);
  });

  return false;
}
  </script>
</body>
</html>