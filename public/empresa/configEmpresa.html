<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Evolvere Invest - Configura√ß√µes Admin</title>
    <link rel="stylesheet" href="../css/styles.css" />
    <link rel="stylesheet" href="../css/configEmpresa.css" />
    <link rel="icon" href="../assets/icon/favicon.png" />
    <script src="../js/monitoramento.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@400;700&family=Orbitron:wght@400;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <header class="site-header">
      <div class="container header-inner">
        <div class="logo">
          <a href="index.html">
            <img src="../imgs/Logo-projeto.png" alt="Evolvere Logo" />
          </a>
          <div class="brand-txt">
            <h1>Evolvere Invest</h1>
            <small>Painel Administrativo</small>
          </div>
        </div>

        <nav>
          <ul class="nav-list">
            <li><a onclick="logout()" class="btn-link">Sair</a></li>
          </ul>
        </nav>
      </div>
    </header>

    <main class="container main-content">
      <section class="config-tabs">
        <div class="tabs-header">
          <button class="tab-btn active" data-tab="users">
            <span class="tab-icon">üë•</span>
            <span>Gerenciar Usu√°rios</span>
          </button>
          <button class="tab-btn" data-tab="create">
            <span class="tab-icon">‚ûï</span>
            <span>Criar Usu√°rio</span>
          </button>
          <button class="tab-btn" data-tab="profile">
            <span class="tab-icon">üíª</span>
            <span>Minha empresa</span>
          </button>
        </div>

        <div class="tab-content active" id="tab-users">
          <div class="card">
            <div class="card-header">
              <div>
                <h2>üë• Gerenciar Usu√°rios</h2>
                <p>Visualize, edite ou remova usu√°rios da plataforma</p>
              </div>
              <div class="card-actions">
                <input
                  type="search"
                  placeholder="üîç Buscar usu√°rio..."
                  class="search-input"
                />
              </div>
            </div>

            <div class="pagination">
              <button class="btn-pagination">‚Üê Anterior</button>
              <span class="pagination-info">P√°gina 1 de 10 ‚Ä¢ 127 usu√°rios</span>
              <button class="btn-pagination">Pr√≥ximo ‚Üí</button>
            </div>
          </div>
        </div>

        <div class="tab-content" id="tab-create">
          <div class="card">
            <div class="card-header">
              <div>
                <h2>‚ûï Criar Novo Usu√°rio</h2>
                <p>Adicione funcion√°rios da sua empresa</p>
              </div>
            </div>

            <form class="config-form">
              <div class="form-row">
                <div class="form-group">
                  <label for="create-name">Nome Completo *</label>
                  <input
                    type="text"
                    id="create-name"
                    placeholder="Ex: Jo√£o Silva"
                    required
                  />
                </div>
                <div class="form-group">
                  <label for="create-email">Email *</label>
                  <input
                    type="email"
                    id="create-email"
                    placeholder="usuario@exemplo.com"
                    required
                  />
                </div>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="create-password">Senha *</label>
                  <input
                    type="password"
                    id="create-password"
                    placeholder="M√≠nimo 8 caracteres"
                    required
                  />
                </div>
                <div class="form-group">
                  <label for="create-confirm">Confirmar Senha *</label>
                  <input
                    type="password"
                    id="create-confirm"
                    placeholder="Repita a senha"
                    required
                  />
                </div>
              </div>

              <div class="alert alert-info">
                <strong>‚ÑπÔ∏è Aten√ß√£o:</strong> Funcion√°rios devem usar email com
                dom√≠nio da sua empresa. Exemplo: <strong>@evolvere.net</strong>
              </div>

              <div class="form-actions">
                <button type="button" class="btn-secondary">Cancelar</button>
                <button type="submit" class="btn-primary">
                  ‚úì Criar Usu√°rio
                </button>
              </div>
            </form>
          </div>
        </div>

        <div
          id="modal-editar-usuario"
          class="modal-overlay"
          style="display: none"
        >
          <div class="modal-container">
            <div class="modal-header">
              <h2>‚úèÔ∏è Editar Usu√°rio</h2>
              <button class="modal-close" onclick="fecharModalEdicao()">
                ‚úñ
              </button>
            </div>
            <div class="modal-body">
              <form id="form-editar-usuario">
                <input type="hidden" id="edit-id-usuario" />

                <div class="form-group">
                  <label for="edit-nome">Nome Completo *</label>
                  <input type="text" id="edit-nome" required />
                </div>

                <div class="form-group">
                  <label for="edit-email">Email *</label>
                  <input type="email" id="edit-email" required />
                </div>

                <div class="form-group">
                  <label for="edit-telefone">Telefone</label>
                  <input
                    type="text"
                    id="edit-telefone"
                    placeholder="11999999999"
                  />
                </div>

                <div class="form-group">
                  <label for="edit-empresa">Empresa</label>
                  <select id="edit-empresa">
                    <option value="">Selecione uma empresa...</option>
                  </select>
                </div>

                <div class="form-actions">
                  <button
                    type="button"
                    class="btn-secondary"
                    onclick="fecharModalEdicao()"
                  >
                    Cancelar
                  </button>
                  <button type="submit" class="btn-primary">
                    Salvar Altera√ß√µes
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>

        <div class="tab-content" id="tab-profile">
          <div class="card">
            <div class="card-header">
              <div>
                <h2>üíª Minha empresa</h2>
                <p>Gerencie as informa√ß√µes da sua empresa</p>
              </div>
            </div>

            <form class="config-form">
              <div class="profile-header">
                <div class="profile-avatar-large">EV</div>
                <div class="profile-info">
                  <h3>Evolvere Invest</h3>
                  <p>vitor.gomes@evolvere.net</p>
                  <span class="badge badge-admin">Administrador Master</span>
                </div>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="profile-name">Nome Fantasia</label>
                  <input
                    type="text"
                    id="profile-name"
                    value="Evolvere Invest"
                  />
                </div>
                <div class="form-group">
                  <label for="profile-email">Email</label>
                  <input
                    type="email"
                    id="profile-email"
                    value="vitor.gomes@evolvere.net"
                    disabled
                  />
                  <small class="form-hint">Email n√£o pode ser alterado</small>
                </div>
              </div>

              <div class="form-divider">
                <span>Alterar Senha</span>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="profile-current-password">Senha Atual</label>
                  <input
                    type="password"
                    id="profile-current-password"
                    placeholder="Digite sua senha atual"
                  />
                </div>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="profile-new-password">Nova Senha</label>
                  <input
                    type="password"
                    id="profile-new-password"
                    placeholder="M√≠nimo 8 caracteres"
                  />
                </div>
                <div class="form-group">
                  <label for="profile-confirm-password"
                    >Confirmar Nova Senha</label
                  >
                  <input
                    type="password"
                    id="profile-confirm-password"
                    placeholder="Repita a nova senha"
                  />
                </div>
              </div>

              <div class="form-actions">
                <button type="button" class="btn-secondary">Cancelar</button>
                <button type="submit" class="btn-primary">
                  üíæ Salvar Altera√ß√µes
                </button>
              </div>
            </form>
          </div>
        </div>
      </section>
    </main>

    <footer class="site-footer">
      <div class="container footer-inner">
        <p>&copy; 2025 Evolvere Invest ‚Äî Painel Administrativo</p>
        <p>Contato: admin@evolvereinvest.net</p>
      </div>
    </footer>

    <script>

      document.addEventListener("DOMContentLoaded", function () {
        const tabButtons = document.querySelectorAll(".tab-btn");
        const tabContents = document.querySelectorAll(".tab-content");

        let paginaAtual = 1;
        let totalPaginas = 1;
        let empresaLogada = null;


        const empresaLogadaSrt = sessionStorage.getItem("EMPRESA_LOGADA");

        if(empresaLogadaSrt){
          empresaLogada = JSON.parse(empresaLogadaSrt);
          console.log("Empresa:", empresaLogada)
        } else {
          alert("N√£o efetuou o login")
          window.location.href = "./login.html"
          return;
        }

        tabButtons.forEach((button) => {
          button.addEventListener("click", () => {
            const targetTab = button.getAttribute("data-tab");
            tabButtons.forEach((btn) => btn.classList.remove("active"));
            tabContents.forEach((content) => content.classList.remove("active"));
            button.classList.add("active");
            document.getElementById(`tab-${targetTab}`).classList.add("active");
          });
        });

        carregarUsuarios(1);
        if(! empresaLogada || !empresaLogada.idEmpresa){
          alert("Empresa n√£o logada ou n√£o existe no bd");
          return;
        }

        const paginaInicial = 1;

          fetch(`/empresa/usuarios/listar/paginado?idEmpresa=${empresaLogada.idEmpresa}&pagina=${paginaInicial}&limmite=5`)
            .then((res) => {
              if(!res.ok){
                throw new Error("erro ao carregar usuario")
              }
              return res.json();
            })
          .then((data) => {
            const {usuarios, paginacao} = data;


          let tabelaContainer = document.querySelector(". users-table");
          if(!tabelaContainer) {
            const cardContent  = document.querySelector("#tab-users.card");
            tabelaContainer = document.createElement("table");
            tabelaContainer.className = "users-table";
            tabelaContainer.innerHTML =`
            <thead>
              <tr>
                <th>Usuario</th>
                <th>Email</th>
                <th>Telefone</th>
                <th>Status</th>
                <th>Data Cria√ß√£o</th>
                <th>A√ß√µes</th>
              </tr>
            </thead>
            <tdbody id="usuarios-tbody"></tdbody>
            `;
            cardContent.appendChild(tabelaContainer);
          }
          })

          const tbody = document.getElementById("usuarios-tbody");
          tbody.innerHTML = "";

          paginaAtual = paginacao.paginaAtual;
          totalPaginas = paginacao.totalPaginas;

          if(usuario.length === 0){
            tbody.innerHTML =
            '<tr><td colspan="8" style="text-align:center;">Nenhum usuario encontrado</td></tr>'
            return
          }

          usuarios.forEach((usuario) => {
                const statusClass =
                  usuario.statusUsuario === "Ativo" ? "active" : "inactive";
                tbody.innerHTML += `
                  <tr>
                    <td>
                      <div class="user-info">
                        <div class="user-avatar">${getIniciais(
                          usuario.nomeUsuario
                        )}</div>
                        <span>${usuario.nomeUsuario}</span>
                      </div>
                    </td>
                    <td>${usuario.emailUsuario}</td>
                    <td>${usuario.telefone || "-"}</td>
                    <td><span class="badge badge-user">Usu√°rio</span></td>
                    <td><span class="status-dot ${statusClass}"></span> ${usuario.statusUsuario}</td>
                    <td>${formatarData(usuario.dtCriacao)}</td>
                    <td>
                      <div class="table-actions">
                        <button class="btn-icon btn-edit" title="Editar" onclick="abrirModalEdicao(${usuario.idUsuario})">‚úèÔ∏è</button>
                        <button class="btn-icon btn-delete" title="Excluir" onclick="excluirUsuario(${ usuario.idUsuario}, '${usuario.nomeUsuario}')">
                          üóëÔ∏è
                        </button>
                      </div>
                    </td>
                  </tr>
                `;
              });
              atualizarPaginacao(paginacao);
            })
            .catch((err) => {
              console.log("Erro ao puxar usuarios", err);
              alert("Erro ao puxar usuarios: ", err.message)
            })

        function atualizarPaginacao(paginacao) {
          const paginationInfo = document.querySelector(".pagination-info");
          const btnAnterior = document.querySelector(".btn-pagination:first-child");
          const btnProximo = document.querySelector(".btn-pagination:last-child");

          paginationInfo.textContent = `P√°gina ${paginacao.paginaAtual} de ${paginacao.totalPaginas} ‚Ä¢ ${paginacao.totalUsuarios} usu√°rios`;

          btnAnterior.disabled = !paginacao.temAnterior;
          btnProximo.disabled = !paginacao.temProxima;

          btnAnterior.style.opacity = paginacao.temAnterior ? "1" : "0.5";
          btnProximo.style.opacity = paginacao.temProxima ? "1" : "0.5";
          btnAnterior.style.cursor = paginacao.temAnterior
            ? "pointer"
            : "not-allowed";
          btnProximo.style.cursor = paginacao.temProxima
            ? "pointer"
            : "not-allowed";

          btnAnterior.onclick = () => {
            if (paginacao.temAnterior) {
              carregarUsuarios(paginacao.paginaAtual - 1);
            }
          };

          btnProximo.onclick = () => {
            if (paginacao.temProxima) {
              carregarUsuarios(paginacao.paginaAtual + 1);
            }
          };
        }
        window.abrirModalEdicao = function (idUsuario) {
          fetch(`/admin/usuarios/${idUsuario}`)
            .then((res) => res.json())
            .then((usuario) => {
              document.getElementById("edit-id-usuario").value = usuario.idUsuario;
              document.getElementById("edit-nome").value = usuario.nome;
              document.getElementById("edit-email").value = usuario.email;
              document.getElementById("edit-telefone").value =
                usuario.telefone || "";
              document.getElementById("edit-empresa").value =
                usuario.Empresa_idEmpresa || "";

              document.getElementById("modal-editar-usuario").style.display =
                "flex";
            })
            .catch((err) => {
              console.error("Erro ao buscar usu√°rio:", err);
              alert("Erro ao carregar dados do usu√°rio");
            });
        };

        window.fecharModalEdicao = function () {
          document.getElementById("modal-editar-usuario").style.display = "none";
        };

        carregarEmpresasSelect();
        function carregarUsuarios(pagina) {
          fetch(`/empresa/usuarios/listar/paginado?pagina=${pagina}&limite=20`)
            .then((res) => res.json())
            .then((data) => {
              const { usuarios, paginacao } = data;
              const tbody = document.getElementById("usuarios-tbody");
              tbody.innerHTML = "";

              paginaAtual = paginacao.paginaAtual;
              totalPaginas = paginacao.totalPaginas;

              if (usuarios.length === 0) {
                tbody.innerHTML =
                  '<tr><td colspan="7" style="text-align:center;">Nenhum usu√°rio encontrado</td></tr>';
                return;
              }

              usuarios.forEach((usuario) => {
                const statusClass =
                  usuario.statusUsuario === "Ativo" ? "active" : "inactive";
                tbody.innerHTML += `
                  <tr>
                    <td>
                      <div class="user-info">
                        <div class="user-avatar">${getIniciais(
                          usuario.nomeUsuario
                        )}</div>
                        <span>${usuario.nomeUsuario}</span>
                      </div>
                    </td>
                    <td>${usuario.emailUsuario}</td>
                    <td><span class="badge badge-user">Usu√°rio</span></td>
                    <td>${usuario.nomeFantasia || "-"}</td>
                    <td><span class="status-dot ${statusClass}"></span> ${
                  usuario.statusUsuario
                }</td>
                    <td>${formatarData(usuario.dtCriacao)}</td>
                    <td>
                      <div class="table-actions">
                        <button class="btn-icon btn-edit" title="Editar" onclick="abrirModalEdicao(${
                          usuario.idUsuario
                        })">
                          ‚úèÔ∏è
                        </button>
                        <button class="btn-icon btn-delete" title="Excluir" onclick="excluirUsuario(${
                          usuario.idUsuario
                        }, '${usuario.nomeUsuario}')">
                          üóëÔ∏è
                        </button>
                      </div>
                    </td>
                  </tr>
                `;
              });
              atualizarPaginacao(paginacao);
            })
            .catch((err) => {
              console.error("Erro ao carregar usu√°rios:", err);
              alert("Erro ao carregar usu√°rios: " + err.message);
            });
        }

        function atualizarPaginacao(paginacao) {
          const paginationInfo = document.querySelector(".pagination-info");
          const btnAnterior = document.querySelector(".btn-pagination:first-child");
          const btnProximo = document.querySelector(".btn-pagination:last-child");

          paginationInfo.textContent = `P√°gina ${paginacao.paginaAtual} de ${paginacao.totalPaginas} ‚Ä¢ ${paginacao.totalUsuarios} usu√°rios`;

          btnAnterior.disabled = !paginacao.temAnterior;
          btnProximo.disabled = !paginacao.temProxima;

          btnAnterior.style.opacity = paginacao.temAnterior ? "1" : "0.5";
          btnProximo.style.opacity = paginacao.temProxima ? "1" : "0.5";
          btnAnterior.style.cursor = paginacao.temAnterior
            ? "pointer"
            : "not-allowed";
          btnProximo.style.cursor = paginacao.temProxima
            ? "pointer"
            : "not-allowed";

          btnAnterior.onclick = () => {
            if (paginacao.temAnterior) {
              carregarUsuarios(paginacao.paginaAtual - 1);
            }
          };

          btnProximo.onclick = () => {
            if (paginacao.temProxima) {
              carregarUsuarios(paginacao.paginaAtual + 1);
            }
          };
        }

        window.abrirModalEdicao = function (idUsuario) {
          fetch(`/admin/usuarios/${idUsuario}`)
            .then((res) => res.json())
            .then((usuario) => {
              document.getElementById("edit-id-usuario").value = usuario.idUsuario;
              document.getElementById("edit-nome").value = usuario.nome;
              document.getElementById("edit-email").value = usuario.email;
              document.getElementById("edit-telefone").value =
                usuario.telefone || "";
              document.getElementById("edit-empresa").value =
                usuario.Empresa_idEmpresa || "";

              document.getElementById("modal-editar-usuario").style.display =
                "flex";
            })
            .catch((err) => {
              console.error("Erro ao buscar usu√°rio:", err);
              alert("Erro ao carregar dados do usu√°rio");
            });
        };

        window.fecharModalEdicao = function () {
          document.getElementById("modal-editar-usuario").style.display = "none";
        };


        function salvarEdicaoUsuario(e){
          e.preventDefault();

          const idUsuario = document.getElementById("edit-id-usuario").value;
        const nome = document.getElementById("edit-nome").value;
        const telefone = document.getElementById("edit-telefone").value;
        const senha = document.getElementById("edit-senha").value;

        const data = {
          nomeServer: nome,
          telefoneSever: telefone,
          idEmpresaServer: empresaLogada, idEmpresa,
        };

        if ( senha && senha.length > 0){
          if(senha.length < 8){
            alert("A senha deve conter no minimo 8 caracteres");
            return;
          }
          dados.senhaServer = senha;
        }

        fetch(`/empresa/usuarios${idUsuario}`, {
          method: "PUT",
          headers: {"Content-type": "applicattion/json"},
          body: JSON.stringify(dados),
        })
          .then((res) => {
            if(!res.ok) {
              throw new Error("Erro ao att usuarrio");
            }
            return res.json();
          })
          .then(() => {
            alert("usuario att com sucess");
            fecharModalEdicao();
            carregarUsuarios(paginaAtual)
          })
          .catch((err) => {
            console.error("Erro ao att uusuario", err);
            alert("err ao att usuario")
          })
        }

        window.fecharModalEdicao = function (){
          const modal = document.getElementById("model-editar-usuario")
          if(modal){
            modal.style.display = "none"
          }
        };

        window.excluirUsuario = function (idUsuario, nomeUsuario) {
          if(!confirm(`Tem certza que deseja excluir esse usuario? "${nomeUsuario}"?\n\nEsta a√ß√£o n√£o pode ser desfeita a n√£o ser que entre em contanto com um adm!`)){
            return
          }

          fetch(`/empresa/usuarios/${idUsuario}? IdEmpresa=${empresaLogada.idEmpresa}`,
            {
              method: "DELETE"
            }
          )
          .then((res) => {
            if(! res.ok){
              throw new Error("Erro ao excluir usuario");
            }
            return res.json();
          })
          .then(() => {
            alert("usuario deletado com sucesso")
            carregarUsuarios(paginaAtual);
          })
          .catch((err) => {
            console.log("Erro ao excluir usuario")
            alert("Erro ao excluir usuario")
          });
        };


        const formCriarUsuario = document.querySelector("#tab-create form");
        if(formCriarUsuario){
          formCriarUsuario.addEventListener("subimit", function (e) {
            e.preventDefault();

            const nome = document.getElementById("create-name").value;
            const email = document.getElementById("crete-email").value;
            const senha = document.getElementById("create-senha").value;
            const confirmarSenha = docuemnt.getElementById("create-confirmarSenha").value;

            if(senha !== confirmarSenha){
              alert("senhas n√£o coincidem");
              return;
            }

            if(senha.length < 8){
              alert("senha deve ter no minimo 8 caracteres");
              return;
            }

            fetch("/empresa/cadastrarUsuario", {
              method: "POST",
              headers: {"Contest-Type": "application/json"},
              body:JSON.stringify({
                nomeServer: nome,
                emailServer: email,
                senhaServer: senha,
                idEmpresaServer: empresaLogada.idEmpresa,
              }),
            })
            .then((res) => {
              if (!res.ok){
                return res.json().then((data) => {
                  throw new Error(data.erro || "erro ao cadastrar usuario");
                });
              }
              return res.json();
              })
            .then(() => {
              alert("usuario cadastrado");
              formCriarUsuariol.reset();
              document.querySelector('[data-tab="users"]').click();
              carregarUsuarios(1);
          })
          .catch((err) => {
            console.error("Error ao cadastrar usuario:", err);
            alert(`${err.message}`)
          });
        });
        }

        const formPerfilEmpresa = document.querySelector("#tab-profile form");
        if(formCriarUsuario){
          formCriarUsuario.addEventListener("subimit", function (e) {
            e.preventDefault();

             const senhaAtual = document.getElementById("profile-current-password").value;
            const novaSenha = document.getElementById("profile-new-password").value;
            const confirmarSenha = docuemnt.getElementById("profile-confirm-password").value;

            if(! senhaAtual) {
              alert("Digite sua senha atual");
              return;
            }

            if(novaSenha.length < 8 ){
              alert("senha deve conter no minimo 8 caracteres");
              return;
            }

            fetch(`/empresa/${empresaLogada.idEmpresa}/atualizarSenha`), {
              method: "PUT",
              headers: {"Contest-Type": "application/json"},
              body:JSON.stringify({
                novaSenhaServer: novaSenha,
            }),
          })
          .then((res) =>{
            if(!res.ok){
              return res.json().then((data) => {
                throw new Error(data.erro || "Erro ao att senha");

              });
            }
            return res.json
          })
          .then(() => {
            alert("Senha att com sucesso");
            document.getElementById("profile-current-password").value = "";
            document.getElementById("profile-new-password").value = "";
            document.getElementById("profile-confirm-password").value = "";
          })
          .catch((err) => {
            console.error("Erro ao att senha", err);
            alert(`${err.message}`)
          });
        });
      }

        // ESTOU EDITANDO AQUI
        document
          .getElementById("form-editar-usuario-proprio")
          .addEventListener("submit", function (e) {
            e.preventDefault();

            const adminLogado = JSON.parse(sessionStorage.getItem("ADMIN_LOGADO"));

            if (!adminLogado || !adminLogado.idAdmin) {
              alert("‚ùå Sess√£o expirada. Fa√ßa login novamente.");
              window.location.href = "/login";
              return;
            }

            const nome = document.getElementById("profile-name").value;
            const senhaAtual = document.getElementById(
              "profile-current-password"
            ).value;
            const novaSenha = document.getElementById("profile-new-password").value;
            const confirmarSenha = document.getElementById(
              "profile-confirm-password"
            ).value;

            if (!nome) {
              alert("‚ùå Digite seu nome!");
              return;
            }

            if (!senhaAtual) {
              alert("‚ùå Digite sua senha atual!");
              return;
            }

            if (novaSenha.length < 8) {
              alert("‚ùå A nova senha deve ter no m√≠nimo 8 caracteres!");
              return;
            }

            if (novaSenha !== confirmarSenha) {
              alert("‚ùå As senhas n√£o coincidem!");
              return;
            }
            fetch(`/admin/usuario/${adminLogado.idAdmin}`, {
              method: "PUT",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({
                nomeServer: nome,
                novaSenhaServer: novaSenha,
              }),
            })
              .then((response) => {
                if (!response.ok) {
                  return response.json().then((data) => {
                    throw new Error(data.erro || "Erro ao atualizar perfil");
                  });
                }
                return response.json();
              })
              .then((data) => {
                alert("‚úì Perfil atualizado com sucesso!");
                document.getElementById("profile-current-password").value = "";
                document.getElementById("profile-new-password").value = "";
                document.getElementById("profile-confirm-password").value = "";
              })
              .catch((erro) => {
                console.error("Erro ao atualizar perfil:", erro);
                alert(`‚ùå ${erro.message}`);
              });
          });
        // ENCERRA AQUI

      function logout() {
        if (confirm("Tem certeza que deseja sair?")) {
          sessionStorage.clear();
          window.location.href = "./login.html";
        }
      }
    </script>
  </body>
</html>
